# std.unittest

## Feature Overview

The unittest package is used for writing unit test code in the Cangjie project, providing basic functionalities including code writing, execution, and debugging, along with advanced features for experienced users.

Cangjie unit testing supports both the cjc compiler (single-package compilation mode) and the cjpm package manager (multi-package mode).

Users can write their first unit test program by following the [Quick Start Guide](./unittest_samples/unittest_getting_started.md#unittest-quick-start). The documentation also explains [Basic Concepts and Usage](./unittest_samples/unittest_basics.md#unittest-basic-concepts-and-usage) with sample code, and provides further details on advanced features such as [Parameterized Testing](./unittest_samples/unittest_parameterized_tests.md#parameterized-testing-introduction).

The following APIs are re-exported from other packages, allowing users to utilize them by importing only unittest.

### Re-exports from unittest.common package

#### Interfaces

| Interface Name | Functionality |
| -------------- | ------------- |
| [DataProvider](../unittest_common/unittest_common_package_api/unittest_common_package_interfaces.md#interface-dataprovider) | Component of DataStrategy for providing test data, where T specifies the data type provided. |
| [DataShrinker](../unittest_common/unittest_common_package_api/unittest_common_package_interfaces.md#interface-datashrinkert) | Component of DataStrategy for shrinking data during testing, where T specifies the data type processed by the shrinker. |
| [DataStrategy](../unittest_common/unittest_common_package_api/unittest_common_package_interfaces.md#interface-datastrategy) | Strategy for providing data in parameterized tests, where T specifies the data type operated by the strategy. |

#### Classes

| Class Name | Functionality |
| --------- | ------------- |
| [Configuration](../unittest_common/unittest_common_package_api/unittest_common_package_classes.md#class-configuration) | Object storing `unittest` configuration data generated by the `@Configure` macro. `Configuration` is a `HashMap`-like class with `String` keys and values of any given type. |
| [ConfigurationKey](../unittest_common/unittest_common_package_api/unittest_common_package_classes.md#class-configurationkey) | Key-value object for configuration items, providing equality and hashCode methods. |

#### Structs

| Struct Name | Functionality |
| ----------- | ------------- |
| [KeyTags](../unittest_common//unittest_common_package_api/unittest_common_package_structs.md#struct-keytags) | Used for configuring key-values in [Configuration](../unittest_common/unittest_common_package_api/unittest_common_package_classes.md#class-configuration). |

### Re-exports from unittest.prop_test package

#### Functions

| Function Name | Functionality |
| ------------- | ------------- |
| [random\<T>()](../unittest_prop_test/unittest_prop_test_package_api/unittest_prop_test_package_functions.md#func-randomt-where-t--arbitraryt) | Generates random data of type T, where T must implement the Arbitrary\<T> interface. The return value serves as a parameter source for parameterized testing. |

#### Interfaces

| Interface Name | Functionality |
| -------------- | ------------- |
| [Arbitrary\<T>](../unittest_prop_test/unittest_prop_test_package_api/unittest_prop_test_package_interfaces.md#interface-arbitraryt) | Interface for generating random values of type T. |
| [Shrink](../unittest_prop_test/unittest_prop_test_package_api/unittest_prop_test_package_interfaces.md#interface-shrinkt) | Reduces values of type T to multiple "smaller" values. |

## API List

### Functions

| Function Name | Functionality |
| ------------- | ------------- |
| [assertCaughtUnexpectedE(String, String, String, ?AssertionCtx)](./unittest_package_api/unittest_package_functions.md#func-assertcaughtunexpectedestring-string-string-assertionctx) | Throws an exception when the caught exception doesn't match expectations, logs information. |
| [assertEqual\<T>(String, String, T, T, ?AssertionCtx)](./unittest_package_api/unittest_package_functions.md#func-assertequaltstring-string-t-t-assertionctx) | Compares whether `expected` and `actual` values are equal. Throws an exception if unequal. |
| [assertEqual\<T>(String, String, T, T, Bool, ?AssertionCtx)](./unittest_package_api/unittest_package_functions.md#func-assertequaltstring-string-t-t-bool-assertionctx) | Compares whether `expected` and `actual` values are equal. Throws an exception if unequal. |
| [defaultConfiguration()](./unittest_package_api/unittest_package_functions.md#func-defaultconfiguration) | Generates default configuration information. |
| [entryMain(TestPackage)](./unittest_package_api/unittest_package_functions.md#func-entrymaintestpackage) | Entry function for framework test case execution, used by `cjc --test`. |
| [expectCaughtUnexpectedE(String,String,String, ?AssertionCtx)](./unittest_package_api/unittest_package_functions.md#func-assertcaughtunexpectedestring-string-string-assertionctx) | Logs information when the caught exception doesn't match expectations, without throwing an exception. |
| [expectEqual(String, String, T, T, ?AssertionCtx)](./unittest_package_api/unittest_package_functions.md#func-assertequaltstring-string-t-t-assertionctx) | Compares whether `expected` and `actual` values are equal. Logs comparison results without throwing an exception. |

| [expectEqual(String, String, T, T, Bool, ?AssertionCtx)](./unittest_package_api/unittest_package_functions.md#func-expectequaltstring-string-t-t-bool-assertionctx) | Compares whether `expected` and `actual` values are equal. Logs comparison results without throwing an exception. |
| [fail(String)](./unittest_package_api/unittest_package_functions.md#func-failstring) | Fails the test case by throwing an exception. |
| [failExpect(String)](./unittest_package_api/unittest_package_functions.md#func-failexpectstring) | Fails the test case by logging information without throwing an exception. |
| [invokeCustomAssert\<T>(Array\<String>, String, (AssertionCtx) -> T, ?AssertionCtx)](./unittest_package_api/unittest_package_functions.md#func-invokecustomasserttarraystring-string-assertionctx---t-assertionctx) | Executes user-defined assertion functions specified by [`@Assert[caller](passerArgs)`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#assert-宏) in macros [`@Test`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#test-宏), [`@TestCase`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#testcase-宏), or [`@CustomAssertion`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#customassertion-宏). |
| [invokeCustomExpect\<T>(Array\<String>, String, (AssertionCtx) -> Any, ?AssertionCtx)](./unittest_package_api/unittest_package_functions.md#func-invokecustomexpectarraystring-string-assertionctx---any-assertionctx) | Executes user-defined assertion functions specified by [`@Expect[caller](passerArgs)`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#expect-宏) in macros [`@Test`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#test-宏), [`@TestCase`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#testcase-宏), or [`@CustomAssertion`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#customassertion-宏). |
| [isNearExpansion\<CT, D>(CT, CT, D, String)](./unittest_package_api/unittest_package_functions.md#func-isnearexpansionct-dct-ct-d-string) | Determines approximate equality. |
| [isNearExpansion\<CT, D>(CT, CT, D, String, Bool)](./unittest_package_api/unittest_package_functions.md#func-isnearexpansionct-dct-ct-d-string-bool) | Determines approximate equality. |

### Type Aliases

| Type Alias | Functionality |
| ---------- | ------------- |
| [MeasurementUnitTable](./unittest_package_api/unittest_package_types.md#type-measurementunittable) | Used to specify [Measurement](./unittest_package_api/unittest_package_interfaces.md#interface-measurement) instances for performance testing. |

### Interfaces

| Interface Name | Functionality |
| ------------- | ------------- |
| [BenchInputProvider](./unittest_package_api/unittest_package_interfaces.md#interface-benchinputprovider) | Interface for handling performance tests where code needs execution before each test call or input changes, requiring regeneration from scratch each time. |
| [BenchmarkConfig](./unittest_package_api/unittest_package_interfaces.md#interface-benchmarkconfig) | Marker interface distinguishing performance-related configuration functions in [Configuration](../unittest_common/unittest_common_package_api/unittest_common_package_classes.md#class-configuration). |
| [BenchmarkInputMarker](./unittest_package_api/unittest_package_interfaces.md#interface-benchmarkinputmarker) | Detects `BenchInputProvider<T>` when `T` is unknown. |
| [Measurement](./unittest_package_api/unittest_package_interfaces.md#interface-measurement) | Interface for collecting and analyzing various data during performance testing. Specific instances are specified in the `@Measure` macro (e.g., in class declarations). |
| [NearEquatable\<CT, D>](./unittest_package_api/unittest_package_interfaces.md#interface-nearequatablect-d) | Determines whether an object is approximately equal based on a delta value. |
| [TestClass](./unittest_package_api/unittest_package_interfaces.md#interface-testclass) | Provides methods for creating [TestSuite](./unittest_package_api/unittest_package_classes.md#class-testsuite). |

### Classes

| Class Name | Functionality |
| --------- | ------------- |
| [AssertionCtx](./unittest_package_api/unittest_package_classes.md#class-assertionctx) | Stores state for user-defined assertions and provides methods for writing them. |
| [Benchmark](./unittest_package_api/unittest_package_classes.md#class-benchmark) | Provides methods for creating and running individual performance test cases. |
| [BenchReport](./unittest_package_api/unittest_package_classes.md#class-benchreport) | Handles reporting of performance test case execution results. |
| [CartesianProductProcessor\<T0,T1>](./unittest_package_api/unittest_package_classes.md#class-cartesianproductprocessort0t1) | Cartesian product processor. |
| [ConsoleReporter](./unittest_package_api/unittest_package_classes.md#class-consolereporter) | Prints unit test or performance test results to the console. |
| [CsvReporter](./unittest_package_api/unittest_package_classes.md#class-csvreporter) | Prints performance test results to CSV files. |
| [CsvRawReporter](./unittest_package_api/unittest_package_classes.md#class-csvrawreporter) | Prints raw performance test measurement data to CSV files. |
| [DataStrategyProcessor\<T>](./unittest_package_api/unittest_package_classes.md#class-datastrategyprocessort) | Base class for all [DataStrategy](../unittest_common/unittest_common_package_api/unittest_common_package_interfaces.md#interface-datastrategy) components. Instances are created by the [`@Strategy`](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#strategy-宏) macro or member functions. |
| [FlatMapProcessor\<T,R>](./unittest_package_api/unittest_package_classes.md#class-flatmapprocessortr) | Processor for applying [FlatMap](../collection/collection_package_api/collection_package_function.md#func-flatmapt-r-t---iterabler) to parameter data. |
| [FlatMapStrategyProcessor\<T,R>](./unittest_package_api/unittest_package_classes.md#class-flatmapstrategyprocessortr) | Processor for applying [FlatMap](../collection/collection_package_api/collection_package_function.md#func-flatmapt-r-t---iterabler) to parameter data. |
| [InputParameter](./unittest_package_api/unittest_package_classes.md#class-inputparameter) | Input parameter object type. |
| [LazyCyclicNode](./unittest_package_api/unittest_package_classes.md#class-lazycyclicnode) | Internal lazy iterator for sequentially advancing type-erased values in a cycle. |
| [MapProcessor\<T,R>](./unittest_package_api/unittest_package_classes.md#class-mapprocessortr) | Processor for applying [Map](../collection/collection_package_api/collection_package_function.md#func-mapt-rt---r) to parameter data. |
| [PowerAssertDiagramBuilder](./unittest_package_api/unittest_package_classes.md#class-powerassertdiagrambuilder) | Output constructor for [PowerAssert](../unittest_testmacro/unittest_testmacro_package_api/unittest_testmacro_package_macros.md#powerassert-宏). |
| [RawStatsReporter](./unittest_package_api/unittest_package_classes.md#class-rawstatsreporter) | Reporter for unprocessed performance test data (internal framework use only). |
| [Report](./unittest_package_api/unittest_package_classes.md#class-report) | Base class for printing test case result reports. |
| [SimpleProcessor\<T>](./unittest_package_api/unittest_package_classes.md#class-simpleprocessort) | Simple data strategy processor implementing [DataStrategyProcessor](./unittest_package_api/unittest_package_classes.md#class-datastrategyprocessort). |
| [TestGroup](./unittest_package_api/unittest_package_classes.md#class-testgroup) | Provides methods for building and running test groups. |
| [TestGroupBuilder](./unittest_package_api/unittest_package_classes.md#class-testgroupbuilder) | Builder for configuring test group methods. |
| [TestPackage](./unittest_package_api/unittest_package_classes.md#class-testpackage) | Test package object. |
| [TestReport](./unittest_package_api/unittest_package_classes.md#class-testreport) | Unit test execution result report. |
| [TestSuite](./unittest_package_api/unittest_package_classes.md#class-testsuite) | Provides methods for building and executing test suites. |
| [TestSuiteBuilder](./unittest_package_api/unittest_package_classes.md#class-testsuitebuilder) | Builder for configuring test suite methods. |
| [UnitTestCase](./unittest_package_api/unittest_package_classes.md#class-unittestcase) | Provides methods for creating and executing unit test cases. |
| [XmlReporter](./unittest_package_api/unittest_package_classes.md#class-xmlreporter) | Prints unit test results to XML files. |

### Enums

| Enum Name | Functionality |
| --------- | ------------- |
| [ExplicitGcType](./unittest_package_api/unittest_package_enums.md#enum-explicitgctype) | Specifies `explicitGC` configuration parameter for the `@Configure` macro, representing three GC execution modes. |
| [TimeUnit](./unittest_package_api/unittest_package_enums.md#enum-timeunit) | Time units usable in `TimeNow` class constructors. |
| [PerfCounter](./unittest_package_api/unittest_package_enums.md#enum-perfcounter) | Enumerates CPU counters supported by [Perf](./unittest_package_api/unittest_package_structs.md#struct-perf) constructors. |

### Structs

| Struct Name | Functionality |
| ----------- | ------------- |
| [BatchInputProvider\<T>](./unittest_package_api/unittest_package_structs.md#struct-batchinputprovidert) | Input provider generating entire benchmark batch inputs in a buffer before execution. |
| [BatchSizeOneInputProvider\<T>](./unittest_package_api/unittest_package_structs.md#struct-batchsizeoneinputprovidert) | Benchmark input provider generating inputs before each benchmark execution. |
| [CpuCycles](./unittest_package_api/unittest_package_structs.md#struct-cpucycles) | Measures CPU cycles using native `rdtscp` instruction (x86 platforms only). |
| [GenerateEachInputProvider\<T>](./unittest_package_api/unittest_package_structs.md#struct-generateeachinputprovidert) | Benchmark input provider generating inputs before each execution. |
| [ImmutableInputProvider\<T>](./unittest_package_api/unittest_package_structs.md#struct-immutableinputprovidert) | Simplest input provider copying data for each benchmark call (default framework usage). |
| [KeyBaseline](./unittest_package_api/unittest_package_structs.md#struct-keybaseline) | Key for configuring values in configuration data. |
| [KeyBaselinePath](./unittest_package_api/unittest_package_structs.md#struct-KeyBaselinePath) | Key for configuring values in configuration data. |
| [KeyBatchSize](./unittest_package_api/unittest_package_structs.md#struct-KeyBatchSize) | Key for configuring values in configuration data. |
| [KeyBench](./unittest_package_api/unittest_package_structs.md#struct-KeyBench) | Key for configuring values in configuration data. |
| [KeyCaptureOutput](./unittest_package_api/unittest_package_structs.md#struct-KeyCaptureOutput) | Key for configuring values in configuration data. |
| [KeyCoverageGuided](./unittest_package_api/unittest_package_structs.md#struct-KeyCoverageGuided) | Key for configuring values in configuration data